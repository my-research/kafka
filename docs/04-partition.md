# partition

- topic 을 분할한 단위
    - 데이터 분산 저장과 병렬 처리가 가능하도록 함
- 같은 topic 내에서 독립적으로 메시지를 저장하고 읽을 수 있음
- 분할 이유
    - 빠르게 전송하기 위해서
        - 4개의 메시지를 순차적으로 보내기 위해서는 하나씩 보내면 4초가 걸림
        - 4개의 프로듀서를 만들어 메시지를 한번에 전송하면 1초가 걸림
        - 순서를 지키기 위해서 프로듀서 하나가 하나의 토픽에 하나의 파티션에 데이터를 전송함

### 순서 보장

- 파티션 내에서 순서가 보장됨
- 파티션간의 순서는 보장되지 않음

### 파티션 수가 많다면?

- 파일 핸들러가 낭비됨
    - 파티션은 브로커의 디렉토리랑 매핑되는데, 저장되는 데이터마다 2개의 파일(인덱스, 데이터)가 저장됨
    - 결국 파티션이 많을수록 파일 핸들러 수가 많아짐
- 장애 복구 시간이 증가함
    - 파티션마다 고가용성을 위한 리플리케이션이 존재함
    - 리더를 선출하기 위해서 파티션들의 상태를 확인할 때 각각 시간이 걸리므로 10,000개의 파티션이 있으면 하나의 파티션당 2 라는 단위 시간이 걸리면 20,000 단위 시간이 걸림

### 파티션은 수를 늘릴 수만 있고 줄일 수 없음
